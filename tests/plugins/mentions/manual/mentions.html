<style>
	body {
		margin: 0px;
		position: static;
	}
</style>

<div style="padding: 1500px">
	<textarea id="editor">
		<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Harum maiores vel tempore inventore culpa unde, repellat animi obcaecati tempora doloremque dolorum dolores perferendis officiis incidunt recusandae voluptates, esse accusamus repellendus dignissimos excepturi error quos corporis, quae tenetur. Nam recusandae, modi totam deserunt omnis ea ad, optio? Voluptates modi quasi impedit fugit commodi explicabo odio quo et, incidunt recusandae animi repellendus vitae eligendi, asperiores amet atque tenetur laudantium. Totam odit voluptatibus nihil a aliquam molestias, alias obcaecati similique, quibusdam eius rem rerum expedita tenetur cupiditate nulla blanditiis vero quam inventore porro. Totam, sint quisquam fugit eum nostrum autem. Quo saepe, ea!</p>
	</textarea>
</div>

<script>

	var data = [
			{ id: 1, name: 'john', fullName: 'John Doe' },
			{ id: 2, name: 'thomas', fullName: 'Thomas Doe' },
			{ id: 3, name: 'anna', fullName: 'Anna Doe' },
			{ id: 4, name: 'annabelle', fullName: 'Annabelle Doe' },
			{ id: 5, name: 'cris', fullName: 'Cris Doe' },
			{ id: 6, name: 'julia', fullName: 'Julia Doe' }
		];

	CKEDITOR.replace( 'editor', {
		width: 600,
		mentions: [
			{
				feed: CKEDITOR.tools.array.map( data, function( item ) {
								return item.name;
							} ),
				minChars: 0
			},
			{
				feed: '{encodedQuery}',
				marker: '$',
				minChars: 0,
				template: '<li data-id="{id}">{fullName}</li>'
			},
			{
				feed: dataCallback,
				marker: '#',
				minChars: 0,
				template: '<li data-id="{id}">{name} ({fullName})</li>'
			}
		],
		on: {
			instanceReady: function() {
				// We have to stub ajax.load function.
				CKEDITOR.ajax.load = function( query, callback ) {
					var results = data.filter( function( item ) {
							return item.name.indexOf( query ) === 0;
						} );

					setTimeout( function() {
						callback( JSON.stringify( results ) );
					}, Math.random() * 500 );
				}
			}
		}
	} );

	window.scrollTo( 1500, 1500 );

	function dataCallback( opts, callback ) {
		setTimeout( function() {
			callback(
				data.filter( function( item ) {
					return item.name.indexOf( opts.query ) === 0;
				} )
			);
		}, Math.random() * 500 );
	}
</script>
